{"version":3,"file":"geo.js","names":["Country","_interopRequireWildcard","require","_lodash","_logger","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","resolveCountryToISO","countryInfo","digits","indexOf","ci","trim","c","length","ISOcodes","isString","toUpperCase","logger","warn","alpha2","alpha3","resolveCountryToISO2","resolveCountryToISO3"],"sources":["../src/geo.js"],"sourcesContent":["import * as Country from \"countryjs\";\nimport { isString } from \"lodash\";\n\nimport { logger } from \"./logger\";\n\n/**\n * takes unidentified country info and tries to get the ISO2/ISO3 Code\n * @param  {String} countryInfo some text about the country\n * @param  {integer} digits     2 or 3 digit response\n * @return {string}             ISO2/ISO3 code\n */\nfunction resolveCountryToISO(countryInfo, digits) {\n  if (!countryInfo || [2, 3].indexOf(digits) === -1) return null;\n  let ci =\n    typeof countryInfo.trim === \"function\" ? countryInfo.trim() : countryInfo;\n  let c;\n\n  try {\n    if (ci.length === 3) {\n      c = Country.ISOcodes(isString(ci) ? ci.toUpperCase() : ci, \"ISO3\");\n    } else if (ci.length === 2) {\n      c = Country.ISOcodes(isString(ci) ? ci.toUpperCase() : ci);\n    } else {\n      c = Country.ISOcodes(ci, \"name\");\n    }\n\n    // check for special cases\n    if (!c && isString(ci)) {\n      // make it great again\n      if (\n        ci.toUpperCase() === \"THE UNITED STATES OF AMERICA\" ||\n        ci.toUpperCase() === \"AMERICA\"\n      )\n        c = Country.ISOcodes(\"USA\", \"ISO3\");\n      else if (ci.length === 1) {\n        if (ci === \"D\") c = Country.ISOcodes(\"DEU\", \"ISO3\");\n        if (ci === \"A\") c = Country.ISOcodes(\"AUT\", \"ISO3\");\n      } else if (ci.toUpperCase() === \"REPUBLIK BULGARIEN\")\n        c = Country.ISOcodes(\"BGR\", \"ISO3\");\n    }\n  } catch (e) {\n    // actually could not find a way to make it throw...\n    /* istanbul ignore next */\n    logger.warn(\"caught exception\", e, \"resolveCountryToISO\");\n  }\n\n  if (!c) return null;\n  if (digits === 2) return c.alpha2;\n  return c.alpha3;\n}\n\n/**\n * takes unidentified country info and tries to get the ISO2 Code\n * @param  {String} countryInfo some text about the country\n * @return {string}             ISO2 code\n */\nfunction resolveCountryToISO2(countryInfo) {\n  return resolveCountryToISO(countryInfo, 2);\n}\n\n/**\n * takes unidentified country info and tries to get the ISO3 Code\n * @param  {String} countryInfo some text about the country\n * @return {string}             ISO3 code\n */\nfunction resolveCountryToISO3(countryInfo) {\n  return resolveCountryToISO(countryInfo, 3);\n}\n\nexport { resolveCountryToISO3, resolveCountryToISO2 };\n"],"mappings":";;;;;;;;AAAA,IAAAA,OAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAD,OAAA;AAEA,IAAAE,OAAA,GAAAF,OAAA;AAAkC,SAAAG,yBAAAC,CAAA,6BAAAC,OAAA,mBAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,yBAAAC,CAAA,WAAAA,CAAA,GAAAG,CAAA,GAAAD,CAAA,KAAAF,CAAA;AAAA,SAAAL,wBAAAK,CAAA,EAAAE,CAAA,SAAAA,CAAA,IAAAF,CAAA,IAAAA,CAAA,CAAAI,UAAA,SAAAJ,CAAA,eAAAA,CAAA,gBAAAK,OAAA,CAAAL,CAAA,0BAAAA,CAAA,sBAAAA,CAAA,QAAAG,CAAA,GAAAJ,wBAAA,CAAAG,CAAA,OAAAC,CAAA,IAAAA,CAAA,CAAAG,GAAA,CAAAN,CAAA,UAAAG,CAAA,CAAAI,GAAA,CAAAP,CAAA,OAAAQ,CAAA,KAAAC,SAAA,UAAAC,CAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,CAAA,IAAAd,CAAA,oBAAAc,CAAA,OAAAC,cAAA,CAAAC,IAAA,CAAAhB,CAAA,EAAAc,CAAA,SAAAG,CAAA,GAAAP,CAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAb,CAAA,EAAAc,CAAA,UAAAG,CAAA,KAAAA,CAAA,CAAAV,GAAA,IAAAU,CAAA,CAAAC,GAAA,IAAAP,MAAA,CAAAC,cAAA,CAAAJ,CAAA,EAAAM,CAAA,EAAAG,CAAA,IAAAT,CAAA,CAAAM,CAAA,IAAAd,CAAA,CAAAc,CAAA,YAAAN,CAAA,cAAAR,CAAA,EAAAG,CAAA,IAAAA,CAAA,CAAAe,GAAA,CAAAlB,CAAA,EAAAQ,CAAA,GAAAA,CAAA;AAElC;AACA;AACA;AACA;AACA;AACA;AACA,SAASW,mBAAmBA,CAACC,WAAW,EAAEC,MAAM,EAAE;EAChD,IAAI,CAACD,WAAW,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAACE,OAAO,CAACD,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,OAAO,IAAI;EAC9D,IAAIE,EAAE,GACJ,OAAOH,WAAW,CAACI,IAAI,KAAK,UAAU,GAAGJ,WAAW,CAACI,IAAI,CAAC,CAAC,GAAGJ,WAAW;EAC3E,IAAIK,CAAC;EAEL,IAAI;IACF,IAAIF,EAAE,CAACG,MAAM,KAAK,CAAC,EAAE;MACnBD,CAAC,GAAG/B,OAAO,CAACiC,QAAQ,CAAC,IAAAC,gBAAQ,EAACL,EAAE,CAAC,GAAGA,EAAE,CAACM,WAAW,CAAC,CAAC,GAAGN,EAAE,EAAE,MAAM,CAAC;IACpE,CAAC,MAAM,IAAIA,EAAE,CAACG,MAAM,KAAK,CAAC,EAAE;MAC1BD,CAAC,GAAG/B,OAAO,CAACiC,QAAQ,CAAC,IAAAC,gBAAQ,EAACL,EAAE,CAAC,GAAGA,EAAE,CAACM,WAAW,CAAC,CAAC,GAAGN,EAAE,CAAC;IAC5D,CAAC,MAAM;MACLE,CAAC,GAAG/B,OAAO,CAACiC,QAAQ,CAACJ,EAAE,EAAE,MAAM,CAAC;IAClC;;IAEA;IACA,IAAI,CAACE,CAAC,IAAI,IAAAG,gBAAQ,EAACL,EAAE,CAAC,EAAE;MACtB;MACA,IACEA,EAAE,CAACM,WAAW,CAAC,CAAC,KAAK,8BAA8B,IACnDN,EAAE,CAACM,WAAW,CAAC,CAAC,KAAK,SAAS,EAE9BJ,CAAC,GAAG/B,OAAO,CAACiC,QAAQ,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,KACjC,IAAIJ,EAAE,CAACG,MAAM,KAAK,CAAC,EAAE;QACxB,IAAIH,EAAE,KAAK,GAAG,EAAEE,CAAC,GAAG/B,OAAO,CAACiC,QAAQ,CAAC,KAAK,EAAE,MAAM,CAAC;QACnD,IAAIJ,EAAE,KAAK,GAAG,EAAEE,CAAC,GAAG/B,OAAO,CAACiC,QAAQ,CAAC,KAAK,EAAE,MAAM,CAAC;MACrD,CAAC,MAAM,IAAIJ,EAAE,CAACM,WAAW,CAAC,CAAC,KAAK,oBAAoB,EAClDJ,CAAC,GAAG/B,OAAO,CAACiC,QAAQ,CAAC,KAAK,EAAE,MAAM,CAAC;IACvC;EACF,CAAC,CAAC,OAAO3B,CAAC,EAAE;IACV;IACA;IACA8B,cAAM,CAACC,IAAI,CAAC,kBAAkB,EAAE/B,CAAC,EAAE,qBAAqB,CAAC;EAC3D;EAEA,IAAI,CAACyB,CAAC,EAAE,OAAO,IAAI;EACnB,IAAIJ,MAAM,KAAK,CAAC,EAAE,OAAOI,CAAC,CAACO,MAAM;EACjC,OAAOP,CAAC,CAACQ,MAAM;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASC,oBAAoBA,CAACd,WAAW,EAAE;EACzC,OAAOD,mBAAmB,CAACC,WAAW,EAAE,CAAC,CAAC;AAC5C;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASe,oBAAoBA,CAACf,WAAW,EAAE;EACzC,OAAOD,mBAAmB,CAACC,WAAW,EAAE,CAAC,CAAC;AAC5C","ignoreList":[]}